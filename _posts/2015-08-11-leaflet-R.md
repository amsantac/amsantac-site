---
layout: post
title:  "Web mapping with Leaflet and R"
date:   2015-08-11 11:02:52
categories: blog leaflet R
---

[Leaflet] is a JavaScript library that has become quite popular for creating interactive maps. In this post I explain how to create a Leaflet map that shows (e.g., a shapefile) .  Quisque erat. Vestibulum pellentesque,

using an R package called [leaflet] developed by the guys from [RStudio]. The leaflet R package allows controlling and integrating Leaflet maps in the R environment.

 

First we need to install the leaflet package in R entering the following command line in the R console:

```
install.packages("leaflet")
```
<br>
fefafa

```
install.packages("leaflet")

```
<br>
using the leaflet package from RStudio

```
library(raster)
library(leaflet)
setwd("C:/amsantac/other/temp/borrar")
```
<br>
read shapefile

```
llanos <- shapefile("C:/amsantac/PhD/Research/dissertation/data/shps/llanos_latlon_col_v3.shp")
```
<br>
map_llanos.html

```
leaflet(data = llanos) %>% addTiles() %>%   addPolygons(fill = FALSE, stroke = TRUE, color = "#03F") %>% 
  addLegend("bottomright", colors = "#03F", labels = "Llanos ecoregion")
```
<br>
landsat_scenes.html

```
llanos_wrs2 <- shapefile("C:/amsantac/PhD/Research/dissertation/data/landsat/wrs grids/llanos_wrs2_desc.shp")
```
<br>
add legend and layers control

```
leaflet() %>% addTiles() %>%   
  addPolygons(data = llanos, fill = FALSE, stroke = TRUE, color = "#03F", group = "Study area") %>% 
  addPolygons(data = llanos_wrs2, fill = TRUE, stroke = TRUE, color = "#f93", 
              popup = paste0("Scene: ", as.character(llanos_wrs2$PATH_ROW)), group = "Landsat scenes") %>% 

  # legend
  addLegend("bottomright", colors = c("#03F", "#f93"), labels = c("Study area", "Landsat scenes (path - row)")) %>%   
  
  # layers control
  addLayersControl(
    overlayGroups = c("Study area", "Landsat scenes"),
    options = layersControlOptions(collapsed = FALSE)
  )
```
<br>
Finally export the map as html in RStudio. Click the 'Export' button and then click 'Save as Web page...'. Then you just need to upload your output html page to your website to make your map available online. You can see an example of a map created with leaflet in this [link]. 

Once uploaded, you can also embed the output html in another html page inserting a code snippet like this wherever you want to display it: 

<div font style="BACKGROUND-COLOR:#f5f5f5;line-height:1">
<xmp font style="border:1px solid;border-color:#888888;black;border-radius:3px;padding: 0em 0 0.3em 0.3em">
<iframe id="map_id" width=700 height=500 src="http://mywebsite.com/my_map.html"></iframe>
</xmp>
</font></div>

And there it is! You got a pretty web map:

<iframe id="map_llanos_emb" width=785 height=500 src="http://amsantac.github.io/cuproject/www/landsat_scenes.html"></iframe>


[Leaflet]:    http://leafletjs.com/
[RStudio]:    https://www.rstudio.com/
[leaflet]:    https://rstudio.github.io/leaflet/
[R language]: http://r-project.org
[link]:       http://amsantac.github.io/cuproject/www/map_llanos.html

